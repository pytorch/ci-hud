(this["webpackJsonppytorch-ci-hud"]=this["webpackJsonppytorch-ci-hud"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),l=(a(101),a(102),a(1)),o=a(9),s=a.n(o),u=a(11),m=a(3),p=a(4),h=a(6),d=a(5),f=a(21),_=a.n(f),b=new(function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,[{key:"url",value:function(e){return"https://ci.pytorch.org/jenkins/"+e+"/api/json"}},{key:"link",value:function(e){return"https://ci.pytorch.org/jenkins/"+e}},{key:"get",value:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),e.next=3,_.a.get(t,{params:a}).then((function(e){n=e})).catch((function(e){}));case 3:if("undefined"===typeof n){e.next=7;break}return e.abrupt("return",n.data);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"batch_get",value:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),r=t.map((function(e){return _.a.get(e,{params:a}).then((function(e){return{response:e}}),(function(e){return{err:e}}))})),e.next=4,_.a.all(r).then((function(e){n=e})).catch((function(e){}));case 4:if("undefined"===typeof n){e.next=8;break}return e.abrupt("return",n.map((function(e){return e.response?e.response.data:null})));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"computer",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get(this.url("computer"),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get(this.url("queue"),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"job",value:function(){var e=Object(u.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get(this.url("job/"+t),a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}());function v(e){var t=e.currentTime-e.updateTime>e.interval?"disconnected":r.a.createElement(n.Fragment,null,"connected in ",e.connectedIn,"ms"),a=e.updateTime-new Date(0)===0?r.a.createElement(n.Fragment,null,"pending"):r.a.createElement(n.Fragment,null,"as of ",e.updateTime.toLocaleTimeString(),"; ",t);return r.a.createElement("span",{className:t},"(",a,")")}function g(e){return e.replace(/^pytorch-/,"").replace(/-trigger$/,"").replace(/^private\//,"").replace(/^ccache-cleanup-/,"").replace(/_ci\/circleci: /,"").replace(/AAA_/,"")}function y(e){var t=new Date(e);return(new Date).toLocaleDateString()===t.toLocaleDateString()?t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}):t.toLocaleString("en-US",{month:"short",day:"numeric",weekday:"short"})}function E(e){var t=new Date(e),a=new Date;return function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60);e=e-3600*t-60*a;var n="";return 0!==t&&(n=t+":"),0===a&&""===n||(n+=(a=a<10&&""!==n?"0"+a:String(a))+":"),""===n?n=e+"s":n+=e<10?"0"+e:String(e),n}(Math.floor((a-t)/1e3))}function w(e){var t;return null!==(t=RegExp("^https://ci\\.pytorch\\.org/jenkins/job/([^/]+)/job/([^/]+)/").exec(e))?t[1].replace(/-builds$/,"")+"/"+g(t[2]):null!==(t=RegExp("https://ci\\.pytorch\\.org/jenkins/job/([^/]+)/").exec(e))?t[1]:e}var k={"linux-cpu":17,"linux-bigcpu":68,"linux-gpu":228,"linux-tc-gpu":228,"linux-multigpu":456,"linux-cpu-ccache":17,"win-cpu":34,"win-gpu":114,osx:13900/30/24,master:17,packet:40,rocm:0,"tc-gpu":114};function x(e){return void 0===e?"?":(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}var j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={computer:[],currentTime:new Date,updateTime:new Date(0),connectedIn:0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.update(),this.interval=setInterval(this.update.bind(this),this.props.interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,this.setState({currentTime:t}),e.next=4,b.computer({tree:"computer[\n                offline,\n                idle,\n                displayName,\n                assignedLabels[name],\n                executors[\n                  currentExecutable[\n                    timestamp,\n                    estimatedDuration,\n                    url,\n                    building\n                  ],\n                  idle\n                ]\n              ]".replace(/\s+/g,"")});case 4:(a=e.sent).updateTime=new Date,a.connectedIn=a.updateTime-t,this.setState(a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=new Map;this.state.computer.forEach((function(t){var a=function(e){var t=e.displayName;return/^c5.xlarge-i-.*$/.test(t)?"linux-cpu":/^c5.4xlarge-i-.*$/.test(t)?"linux-bigcpu":/^g3.8xlarge-i-.*$/.test(t)?e.assignedLabels.some((function(e){return"tc_gpu"===e.name}))?"linux-tc-gpu":"linux-gpu":/^g3.16xlarge-i-.*$/.test(t)?"linux-multigpu":/^worker-c5-xlarge-.*$/.test(t)?"linux-cpu-ccache":/^worker-macos-high-sierra-.*$/.test(t)?"osx":/^worker-win-c5.2xlarge-i-.*$/.test(t)?"win-cpu":/^worker-win-g3.4xlarge-i-.*$/.test(t)?"win-gpu":/^worker-osuosl-ppc64le-cpu-.*$/.test(t)?"ppc":/^worker-packet-type-1-.*$/.test(t)?"packet":/^jenkins-worker-rocm-.*$/.test(t)?"rocm":/^worker-g3-4xlarge-.*$/.test(t)?"tc-gpu":t}(t),n=e.get(a);void 0===n&&(n={busy:0,total:0}),t.offline||(n.total++,t.idle||n.busy++),e.set(a,n)}));var t=0;e.forEach((function(e,a){var n=k[a];void 0!==n&&(e.totalCost=n*e.total,t+=e.totalCost)}));var a=Object(l.a)(e.entries()).sort().map((function(e){var t=x(e[1].totalCost);return r.a.createElement("tr",{key:e[0]},r.a.createElement("th",null,e[0]),r.a.createElement("td",null,e[1].busy," / ",e[1].total),r.a.createElement("td",{className:"ralign"},t,"/hr"))})),n=this.state.computer.filter((function(e){return!e.idle&&"master"!==e.displayName&&e.executors.length>0&&e.executors[0].currentExecutable}));n.sort((function(e,t){return e.executors[0].currentExecutable.timestamp-t.executors[0].currentExecutable.timestamp}));var c=n.map((function(e){var t=e.executors[0].currentExecutable;return r.a.createElement("tr",{key:e.displayName},r.a.createElement("td",{className:"left-cell"},E(t.timestamp)),r.a.createElement("td",null,r.a.createElement("a",{href:t.url},w(t.url))))})),i=new Map;return n.forEach((function(e){var t=e.executors[0].currentExecutable,a=w(t.url),n=i.get(a);void 0===n&&(n={total:0,cumulative_time:0},i.set(a,n)),n.total++,n.cumulative_time+=function(e){var t=new Date(e);return(new Date-t)/1e3}(t.timestamp)})),r.a.createElement("div",null,r.a.createElement("h2",null,"Computers"," ",r.a.createElement(v,{interval:this.props.interval,currentTime:this.state.currentTime,updateTime:this.state.updateTime,connectedIn:this.state.connectedIn})),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("table",null,r.a.createElement("tbody",null,a),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{className:"ralign",colSpan:"2"},x(24*t*30),"/mo"))))),r.a.createElement("td",{className:"right-cell"},r.a.createElement("table",null,r.a.createElement("tbody",null,c)))))))}}]),a}(n.Component),N=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={items:[],currentTime:new Date,updateTime:new Date(0),connectedIn:0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.update(),this.interval=setInterval(this.update.bind(this),this.props.interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,this.setState({currentTime:t}),e.next=4,b.queue();case 4:(a=e.sent).updateTime=new Date,a.connectedIn=a.updateTime-t,this.setState(a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=new Map;this.state.items.forEach((function(t){var a=function(e){return e.replace(/^Waiting for next available executor on/,"Needs").replace(/docker&&cpu&&ccache/,"linux-cpu-ccache").replace(/[^ ]+cpu_ccache.+/,"linux-cpu-ccache").replace(/docker&&cpu&&!ccache/,"linux-cpu").replace(/docker&&cpu/,"linux-cpu-any").replace(/docker&&gpu/,"linux-gpu").replace(/docker&&bigcpu/,"linux-bigcpu").replace(/windows&&cpu/,"windows-cpu").replace(/windows&&gpu/,"windows-gpu").replace(/g3.8xlarge-i-[^ ]+/,"linux-gpu").replace(/g3.16xlarge-i-[^ ]+/,"linux-multigpu").replace(/worker-win-c5.2xlarge-i-[^ ]+/,"windows-cpu").replace(/worker-win-g3.4xlarge-i-[^ ]+/,"windows-gpu")}(t.why),n=e.get(a);void 0===n&&(n={total:0},e.set(a,n)),n.total++}));var t=Object(l.a)(e.entries()).sort().map((function(e){var t=e[0],a=e[1];return r.a.createElement("tr",{key:t},r.a.createElement("td",{style:{textAlign:"right",paddingRight:15}},a.total),r.a.createElement("th",null,t))})),a=new Map;this.state.items.forEach((function(e){var t=w(e.task.url),n=a.get(t);void 0===n&&(n={total:0},a.set(t,n)),n.total++}));var n=Object(l.a)(a.entries()).sort((function(e,t){return t[1].total-e[1].total})).slice(0,10).map((function(e){var t=e[0],a=e[1];return r.a.createElement("tr",{key:t},r.a.createElement("td",{style:{textAlign:"right",paddingRight:15}},a.total),r.a.createElement("th",null,t))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Queue"," ",r.a.createElement(v,{interval:this.props.interval,connectedIn:this.state.connectedIn,currentTime:this.state.currentTime,updateTime:this.state.updateTime})),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{width:300,style:{textOverflow:"clip",maxWidth:300,overflow:"hidden"}},r.a.createElement("table",null,r.a.createElement("tbody",null,t))),r.a.createElement("td",{className:"right-cell",width:300},r.a.createElement("table",null,r.a.createElement("tbody",null,n,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("th",null,a.size>10?"...":"")))))))))}}]),a}(n.Component),S=a(19),O=a(62),T=a(63),D=a.n(T),F=a(36),I=["_","setup","caffe2-py2-cuda9.0-cudnn7-windows","caffe2-py2-devtoolset7-rocmrpm-centos7.5","py3.6-clang7-rocmdeb-ubuntu16.04","win-ws2016-cuda9-cudnn7-py3","pytorch_linux_xenial_py2_7_9","pytorch_linux_xenial_cuda9_cudnn7_py3","pytorch_linux_xenial_py3_clang5_asan","pytorch_linux_xenial_py3_6_gcc5_4","pytorch_libtorch_linux_xenial_cuda9_cudnn7_py3","caffe2_py2_mkl_ubuntu16_04","caffe2_py3_5_cuda10_1_cudnn7_ubuntu16_04","caffe2_onnx_py2_gcc5_ubuntu16_04","caffe2_onnx_main_py3_6_clang7_ubuntu16_04","caffe2_onnx_ort1_py3_6_clang7_ubuntu16_04","caffe2_onnx_ort2_py3_6_clang7_ubuntu16_04","caffe2_py2_clang7_ubuntu16_04","caffe2_cmake_cuda9_0_cudnn7_ubuntu16_04","caffe2_py3_6_devtoolset7_cuda9_0_cudnn7_centos7","binary_linux_manywheel_2_7mu_cpu_devtoolset7","binary_linux_libtorch_2_7m_cpu_devtoolset7","binary_linux_libtorch_2_7m_cpu_gcc5_4_cxx11-abi","binary_linux_libtorch_2_7_cpu","caffe2_py2_android_ubuntu16_04","caffe2_py2_system_macos10_13","pytorch_macos_10_13_py3","pytorch_macos_10_13_cuda9_2_cudnn7_py3","pytorch-linux_xenial_py3_clang5_android_ndk_r19c_x86_32_build","pytorch-linux-xenial-py3-clang5-android-ndk-r19c-gradle-build-x86_32","pytorch_ios_10_2_1_x86_64_build","pytorch_ios_10_2_1_arm64_build","pytorch_linux_backward_compatibility_check_test","pytorch_xla_linux_xenial_py3_6_clang7","pytorch_python_doc_push","pytorch_cpp_doc_push"],C=["binary_linux_manywheel_2_7mu_cpu_devtoolset7_build","binary_linux_manywheel_3_7m_cu100_devtoolset7_build","binary_linux_conda_2_7_cpu_devtoolset7_build","binary_macos_wheel_3_6_cpu_build","binary_macos_conda_2_7_cpu_build","binary_macos_libtorch_2_7_cpu_build","binary_linux_manywheel_2_7mu_cpu_devtoolset7_test","binary_linux_manywheel_3_7m_cu100_devtoolset7_test","binary_linux_conda_2_7_cpu_devtoolset7_test","binary_linux_libtorch_2_7m_cpu_devtoolset7_shared-with-deps_build","binary_linux_libtorch_2_7m_cpu_devtoolset7_shared-with-deps_test","binary_linux_libtorch_2_7m_cpu_gcc5_4_cxx11-abi_shared-with-deps_build","binary_linux_libtorch_2_7m_cpu_gcc5_4_cxx11-abi_shared-with-deps_test"];function M(e){return"SUCCESS"===e||"success"===e}function J(e){return"FAILURE"===e||"failure"===e||"error"===e||"timed_out"===e}function A(e){var t=e.jobName;return/caffe2-builds/.test(e.url)?"caffe2-"+t:t}var L=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=n.initialState(),n}return Object(p.a)(a,[{key:"initialState",value:function(){var e=localStorage.getItem("prefs"),t={};return e&&(t=JSON.parse(e)),"showStale"in t||(t.showStale=!1),"username"in t||(t.username=""),"showNotifications"in t||(t.showNotifications=!0),{builds:[],known_jobs:[],currentTime:new Date,updateTime:new Date(0),showStale:t.showStale,username:t.username,showNotifications:t.showNotifications}}},{key:"componentDidMount",value:function(){this.update(),this.interval=setInterval(this.update.bind(this),this.props.interval),this.state.showNotifications&&"granted"!==Notification.permission&&Notification.requestPermission()}},{key:"componentDidUpdate",value:function(e){localStorage.setItem("prefs",JSON.stringify({showNotifications:this.state.showNotifications,showStale:this.state.showStale,username:this.state.username})),this.props.job!==e.job&&(this.setState(this.initialState()),this.update())}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r,c,i,o,m,p=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=function(e,t){var a=I.some((function(t){return g(e).startsWith(t)})),n=I.some((function(e){return g(t).startsWith(e)}));return a<n?1:a>n||e<t?-1:e>t?1:0},i=function(e){e.subBuilds.forEach((function e(t){t.build&&"com.tikal.jenkins.plugins.multijob.MultiJobBuild"===t.build._class?t.build.subBuilds.forEach(e):c.add(A(t))}))},r=function(){return(r=Object(u.a)(s.a.mark((function e(){var t,n,r,c,i,l,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e,a){var r=n[a].commitId;if(e)for(var c in e){var i=e[c];t[r].hasOwnProperty(c)||(t[r][c]={duration:"0",result:i.status,url:i.build_url})}},t={},n=[],c=Object(S.a)(a.builds);try{for(c.s();!(i=c.n()).done;)for(l=i.value,o=0;o<l.changeSet.items.length;o++)u=l.changeSet.items[o].commitId,t.hasOwnProperty(u)||(t[u]={}),n.push({url:"https://s3.amazonaws.com/ossci-job-status/combined/"+u+".json",commitId:u})}catch(s){c.e(s)}finally{c.f()}return e.next=7,b.batch_get(n.map((function(e){return e.url})));case 7:return e.sent.forEach(r),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(){return r.apply(this,arguments)},t=new Date,this.setState({currentTime:t}),e.next=9,b.job(this.props.job,{tree:"builds[\n                  url,\n                  number,\n                  duration,\n                  timestamp,\n                  result,\n                  actions[parameters[name,value],\n                  causes[shortDescription]],\n                  changeSet[items[commitId,comment,msg]],\n                  subBuilds[\n                    result,jobName,url,duration,\n                    build[\n                      subBuilds[\n                        result,jobName,url,duration,\n                        build[\n                          subBuilds[result,jobName,url,duration]\n                        ]\n                      ]\n                    ]\n                  ]\n               ]".replace(/\s+/g,"")});case 9:a=e.sent,e.next=16;break;case 12:return 1,e.next=15,b.job(this.props.job,{depth:1});case 15:a=e.sent;case 16:return a.updateTime=new Date,a.connectedIn=a.updateTime-t,void 0!==a.allBuilds&&(a.builds=a.allBuilds),e.next=21,n();case 21:a.github_commit_statuses=e.sent,c=new Set,"binary"!==(o=this.props.mode)&&a.builds.forEach(i),a.github_commit_statuses&&Object.keys(a.github_commit_statuses).forEach((function(e){var t=a.github_commit_statuses[e];Object.keys(t).forEach((function(e){if("binary"!==o){for(var t=0;t<C.length;t++)if(e.endsWith(C[t])){c.add("_"+e);break}e.includes("binary_")||e.includes("smoke_")||c.add("_"+e)}else if(e.includes("binary_")||e.includes("smoke_")){for(var a=!1,n=0;n<C.length;n++)if(e.endsWith(C[n])){a=!0;break}a||c.add("_"+e)}}))})),a.known_jobs=Object(l.a)(c.values()).sort(m),a.builds.forEach((function(e){var t=new Map;function n(){return(n=Object(u.a)(s.a.mark((function e(n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.changeSet.items.length>0)for(r=function(){var e=n.changeSet.items[c].commitId;a.github_commit_statuses&&Object.keys(a.github_commit_statuses[e]).forEach((function(n){var r=a.github_commit_statuses[e][n];t.set("_"+n,{duration:r.duration,result:r.result,url:r.url})}))},c=0;c<n.changeSet.items.length;c++)r();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.subBuilds.forEach((function e(a){a.build&&"com.tikal.jenkins.plugins.multijob.MultiJobBuild"===a.build._class?a.build.subBuilds.forEach(e):t.set(A(a),a)})),function(e){n.apply(this,arguments)}(e),e.sb_map=t})),10,this.props.job.includes("master")&&function(){var e=new Set,t=new Map;a.known_jobs.forEach((function(t){"pytorch_doc_push"!==t&&"__dr.ci"!==t&&(t.includes("nightlies")||e.add(t))}));for(var n=0;n<a.builds.length&&!(n>10)&&e.size;n++){a.builds[n].sb_map.forEach((function(a,n){if(e.has(n))if(J(a.result)){var r=t.get(n)||0;r++,t.set(n,r)}else M(a.result)&&e.delete(n);else;}))}t.forEach((function(e,a){e<=1&&t.delete(a)})),a.consecutive_failure_count=t,p.state.consecutive_failure_count&&p.state.consecutive_failure_count.forEach((function(e,a){t.has(a)||new Notification("\u2705 "+p.props.job,{body:g(a)})})),t.forEach((function(e,t){p.state.consecutive_failure_count&&!p.state.consecutive_failure_count.has(t)&&new Notification("\u274c "+p.props.job,{body:g(t)})}))}(),this.setState(a);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;var t=this.state.builds,a=this.state.consecutive_failure_count,c=this.state.known_jobs,i=c.map((function(e){return r.a.createElement("th",{className:"rotate",key:e},r.a.createElement("div",{className:(I.some((function(t){return g(e).startsWith(t)}))?"pr-header":"master-only-header")+" "+(a.has(e)?"failing-header":"")},I.some((function(t){return g(e).startsWith(t)}))?"":"\u2022 ",g(e)))})),l=O.scaleLinear().rangeRound([0,100]);l.domain([0,O.max(t,(function(e){return e.duration}))]);var o=new Set,s=t.map((function(t){var a=t.sb_map;var i=0,s=!1,u=!1,m=!1,p=c.map((function(t){var c,l,o=a.get(t),p=r.a.createElement(n.Fragment,null);if(void 0!==o){m=!0;var h=D()(o.duration),d="short-perf-test-gpu"===(l=A(o))?"linux-gpu":"doc-push"===l?"linux-cpu":/-win/.test(l)?/-test/.test(l)&&/-cuda/.test(l)?"win-gpu":"win-cpu":/-macos/.test(l)?"osx":/-linux/.test(l)||/-ubuntu/.test(l)||/-centos/.test(l)||/-xenial/.test(l)?/cuda/.test(l)?/-multigpu-test/.test(l)?"linux-multigpu":/-test/.test(l)?"linux-gpu":"linux-cpu":/-rocm/.test(l)?/-test/.test(l)?"rocm":"linux-bigcpu":"linux-cpu":"unknown",f=0;if("unknown"===d?s=!0:f=Math.ceil(k[d]*h/1e3/60/60),i+=f,o.result||(u=!0),"perf"===e.props.mode)p=function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement("span",{className:M(t)?"ok-duration":"suspect-duration"},D()(e.duration)/1e3),"\xa0\xa0")}(o,o.result);else if("cost"===e.props.mode)p=r.a.createElement(n.Fragment,null,"unknown"===d?"?":f,"\xa0\xa0");else{var _=o.url;/^https?:\/\//.test(_)?_.includes("jenkins")&&(_+="/console"):_=b.link(_+"/console"),p=r.a.createElement("a",{href:_,className:"icon",target:"_blank",alt:A(o)},M(c=o.result)?r.a.createElement("span",{role:"img",style:{color:"green"},"aria-label":"passed"},"0"):J(c)?r.a.createElement("span",{role:"img",style:{color:"red"},"aria-label":"failed"},"X"):function(e){return"ABORTED"===e||"cancelled"===e}(c)?r.a.createElement("span",{role:"img",style:{color:"gray"},"aria-label":"cancelled"},"."):function(e){return!e||"pending"===e}(c)?r.a.createElement("span",{className:"animate-flicker",role:"img",style:{color:"goldenrod"},"aria-label":"in progress"},"?"):c)}}return r.a.createElement(F.a,{key:t,overlay:t,mouseLeaveDelay:0,placement:"rightTop",destroyTooltipOnHide:!0},r.a.createElement("td",{key:t,className:"icon-cell",style:{textAlign:"right",fontFamily:"sans-serif",padding:0}},p))}));function h(e){var t=r.a.createElement("em",null,"Manually triggered rebuild.");return void 0===e.actions?t:e.actions.filter((function(e){return void 0!==e.causes})).map((function(e,t){return e.causes.map((function(e,t){return r.a.createElement("em",{key:t},e.shortDescription,". ")}))}))}var d,f,_=t.actions.some((function(e){return void 0!==e.causes&&e.causes.some((function(e){return"com.sonyericsson.rebuild.RebuildCause"===e._class}))})),v=t.actions.some((function(e){return void 0!==e.causes&&e.causes.some((function(e){return"org.jenkinsci.plugins.ghprb.GhprbCause"===e._class||"hudson.model.Cause$UpstreamCause"===e._class&&/-pull-request$/.test(e.upstreamProject)}))})),g="",E="",w=!1;if(_)E=h(t);else if(v){var j=function(e){var t=e.actions.find((function(e){return"org.jenkinsci.plugins.ghprb.GhprbParametersAction"===e._class}));return void 0===t&&(t=e.actions.find((function(e){return"com.tikal.jenkins.plugins.multijob.MultiJobParametersAction"===e._class}))),void 0===t?new Map:new Map(t.parameters.map((function(e){return[e.name,e.value]})))}(t),N=j.get("ghprbPullTitle");if(d=j.get("ghprbPullLink"),f=j.get("ghprbPullId"),g=j.get("ghprbPullAuthorLogin"),E=N,o.has(f)){if(!e.state.showStale)return r.a.createElement(n.Fragment,{key:t.number});w=!0}if(""!==e.state.username&&e.state.username!==g)return r.a.createElement(n.Fragment,{key:t.number});o.add(f)}else{var S=t.changeSet;g=function(e){var t=e.actions.find((function(e){return"hudson.model.CauseAction"===e._class}));if(void 0===t)return"(unknown)";var a=t.causes.find((function(e){return"com.cloudbees.jenkins.GitHubPushCause"===e._class}));if(void 0===a)return"";var n=a.shortDescription.match(/Started by GitHub push by (.+)/);return null===n?a.shortDescription:n[1]}(t),E=0===S.items.length?h(t):S.items.slice().reverse().map((function(e){return r.a.createElement("div",{key:e.commitId},function(e){var t=e.match(/\(#(\d+)\)/);return t?r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"https://github.com/pytorch/pytorch/pull/"+t[1],target:"_blank"},"#",t[1])):r.a.createElement(n.Fragment,null)}(e.comment)," ",e.msg.replace(/\(#[0-9]+\)/,"")," ",r.a.createElement("code",null,r.a.createElement("a",{href:"https://github.com/pytorch/pytorch/commit/"+e.commitId,target:"_blank"},e.commitId.slice(0,7))))}))}var O=y(t.timestamp);return m?r.a.createElement("tr",{key:t.number,className:w?"stale":""},r.a.createElement("th",{className:"left-cell"},r.a.createElement("a",{href:t.url,target:"_blank"},t.number)),r.a.createElement("th",{className:"left-cell"},r.a.createElement("a",{href:d,target:"_blank"},f?"#"+f:"")),r.a.createElement("td",{className:"left-cell"},O),p,r.a.createElement("td",{className:"right-cell bar-number"},Math.floor(t.duration/1e3/60)),r.a.createElement("td",null,r.a.createElement("svg",{width:100,height:10},r.a.createElement("rect",{className:"bar",x:"0",y:"0",width:l(t.duration),height:10}))),r.a.createElement("td",{className:"right-cell",style:{textAlign:"right"}},u?"\u2265 ":"",x(i),s?"?":""),r.a.createElement("td",{className:"right-cell"},g),r.a.createElement("td",{className:"right-cell"},E)):r.a.createElement(n.Fragment,null)}));return r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("a",{href:b.link("job/"+this.props.job),target:"_blank"},this.props.job)," ","history"," ",r.a.createElement(v,{interval:this.props.interval,connectedIn:this.state.connectedIn,currentTime:this.state.currentTime,updateTime:this.state.updateTime})),r.a.createElement("div",{style:{color:"#909"}},"\u2022 Purple bulleted jobs run on master only."),r.a.createElement("div",null,r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",name:"show-stale",checked:this.state.showStale,onChange:function(t){e.setState({showStale:t.target.checked})}}),r.a.createElement("label",{htmlFor:"show-stale"},"Show stale builds of PRs")),r.a.createElement("li",null,r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),r.a.createElement("label",{htmlFor:"username",style:{backgroundColor:"white",position:"relative",zIndex:3}},"Show builds from this user only")),r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",name:"show-notifications",checked:this.state.showNotifications,onChange:function(t){return e.setState({showNotifications:t.target.checked})}}),r.a.createElement("label",{htmlFor:"show-notifications"},"Show notifications on master failure","denied"===Notification.permission?r.a.createElement(n.Fragment,null," ",r.a.createElement("strong",null,"(WARNING: notifications are currently denied)")):"")))),r.a.createElement("table",{className:"buildHistoryTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"left-cell"},"J#"),r.a.createElement("th",{className:"left-cell"},"PR#"),r.a.createElement("th",{className:"left-cell"},"Date"),i,r.a.createElement("th",{className:"right-cell",colSpan:"2"},"Latency (min)"),r.a.createElement("th",{className:"right-cell"},"Cost"),r.a.createElement("th",{className:"right-cell"},"User"),r.a.createElement("th",{className:"right-cell"},"Description"))),r.a.createElement("tbody",null,s)))}}]),a}(n.Component),U=["binary_linux_manywheel_2_7mu_cpu_devtoolset7_build","binary_linux_manywheel_3_7m_cu100_devtoolset7_build","binary_linux_conda_2_7_cpu_devtoolset7_build","binary_macos_wheel_3_6_cpu_build","binary_macos_conda_2_7_cpu_build","binary_macos_libtorch_2_7_cpu_build","binary_linux_manywheel_2_7mu_cpu_devtoolset7_test","binary_linux_manywheel_3_7m_cu100_devtoolset7_test","binary_linux_conda_2_7_cpu_devtoolset7_test","binary_linux_libtorch_2_7m_cpu_devtoolset7_shared-with-deps_build","binary_linux_libtorch_2_7m_cpu_devtoolset7_shared-with-deps_test","binary_linux_libtorch_2_7m_cpu_gcc5_4_cxx11-abi_shared-with-deps","pytorch_linux_xenial_pynightly"];function P(e){return U.some((function(t){return e.includes(t)}))}function W(e){return"SUCCESS"===e||"success"===e}function B(e){return"FAILURE"===e||"failure"===e||"error"===e||"timed_out"===e}function R(e){for(var t=new Map,a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];t.set(r,e[r])}return t}var $=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=n.initialState(),n}return Object(p.a)(a,[{key:"initialState",value:function(){var e=localStorage.getItem("prefs2"),t={};return e&&(t=JSON.parse(e)),"showNotifications"in t||(t.showNotifications=!0),"showServiceJobs"in t||(t.showServiceJobs=!0),{builds:[],known_jobs:[],currentTime:new Date,updateTime:new Date(0),showNotifications:t.showNotifications,showServiceJobs:t.showServiceJobs,jobNameFilter:""}}},{key:"componentDidMount",value:function(){this.update(),this.interval=setInterval(this.update.bind(this),this.props.interval),this.state.showNotifications&&"granted"!==Notification.permission&&Notification.requestPermission()}},{key:"componentDidUpdate",value:function(e){localStorage.setItem("prefs2",JSON.stringify({showNotifications:this.state.showNotifications,showServiceJobs:this.state.showServiceJobs})),this.props.job===e.job&&this.props.mode===e.mode||(this.setState(this.initialState()),this.update())}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r,c,i,o,m,p,h,d=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=this.props.job.replace(/^pytorch-/,""),n="master"===a?a:"pr",r="https://s3.amazonaws.com/ossci-job-status",this.setState({currentTime:t}),e.next=7,_.a.get("".concat(r,"/").concat(a,"/index.json"));case 7:return c=e.sent,i=c.data.map(function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("".concat(r,"/").concat(n,"/").concat(t.id,".json"));case 3:a=e.sent,t.sb_map=R(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.sb_map=new Map;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e.next=11,_.a.all(i);case 11:(o=e.sent).reverse(),console.log(o),(m={}).updateTime=new Date,m.connectedIn=m.updateTime-t,p=this.props.mode,h=new Set,o.forEach((function(e){e.sb_map.forEach((function(e,t){var a=(t.includes("binary_")||t.includes("smoke_")||t.includes("nightly_")||t.includes("nigthly_"))&&!P(t);("nightly"!==p&&!a||"nightly"===p&&a)&&h.add(t)}))})),m.known_jobs=Object(l.a)(h.values()).sort(),m.builds=o,10,this.props.job.startsWith("pytorch-")&&function(){var e=new Set,t=new Map;m.known_jobs.forEach((function(t){"pytorch_doc_push"!==t&&"__dr.ci"!==t&&(t.includes("nightlies")||e.add(t))}));for(var a=0;a<m.builds.length&&!(a>10)&&e.size;a++){m.builds[a].sb_map.forEach((function(a,n){if(e.has(n))if(B(a.status)){var r=t.get(n)||0;r++,t.set(n,r)}else W(a.status)&&e.delete(n);else;}))}t.forEach((function(e,a){e<=1&&t.delete(a)})),m.consecutive_failure_count=t,d.state.consecutive_failure_count&&d.state.consecutive_failure_count.forEach((function(e,a){t.has(a)||new Notification("\u2705 "+d.props.job,{body:g(a)})})),t.forEach((function(e,t){d.state.consecutive_failure_count&&!d.state.consecutive_failure_count.has(t)&&new Notification("\u274c "+d.props.job,{body:g(t)})}))}(),this.setState(m);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldShowJob",value:function(e){var t=this.state.jobNameFilter;if(t.length>0&&!e.includes(t))return!1;if(this.state.showServiceJobs)return!0;var a=e.startsWith("ci/circleci: docker"),n=e.startsWith("ci/circleci: ecr_gc");return!(a||"welcome"===e||n)}},{key:"render",value:function(){var e=this;var t=this.state.builds,a=this.state.consecutive_failure_count,c=this.state.known_jobs.filter((function(t){return e.shouldShowJob(t)})),i=c.map((function(e){return r.a.createElement("th",{className:"rotate",key:e},r.a.createElement("div",{className:a.has(e)?"failing-header":""},g(e)))})),l=t.map((function(e){var t=!1,a=e.sb_map;console.log(e);var i=c.map((function(e){var c,i=a.get(e),l=r.a.createElement(n.Fragment,null);return void 0!==i&&(t=!0,l=r.a.createElement("a",{href:i.build_url,className:"icon",target:"_blank",alt:e},W(c=i.status)?r.a.createElement("span",{role:"img",style:{color:"green"},"aria-label":"passed"},"0"):function(e){return"skipped"===e}(c)?r.a.createElement("span",{role:"img",style:{color:"gray"},"aria-label":"skipped"},"S"):B(c)?r.a.createElement("span",{role:"img",style:{color:"red"},"aria-label":"failed"},"X"):function(e){return"ABORTED"===e||"cancelled"===e}(c)?r.a.createElement("span",{role:"img",style:{color:"gray"},"aria-label":"cancelled"},"."):function(e){return!e||"pending"===e}(c)?r.a.createElement("span",{className:"animate-flicker",role:"img",style:{color:"goldenrod"},"aria-label":"in progress"},"?"):function(e){return"infrastructure_fail"===e}(c)?r.a.createElement("span",{role:"img",style:{color:"grey"},"aria-label":"failed"},"X"):c)),r.a.createElement(F.a,{key:e,overlay:e,mouseLeaveDelay:0,placement:"rightTop",destroyTooltipOnHide:!0},r.a.createElement("td",{key:e,className:"icon-cell",style:{textAlign:"right",fontFamily:"sans-serif",padding:0}},l))}));var l,o=e.author.username?e.author.username:e.author.name,s=r.a.createElement("div",{key:e.id},(l=e.message,l.replace(/\(#[0-9]+\)/,"")).split("\n")[0]," ",r.a.createElement("code",null,r.a.createElement("a",{href:"https://github.com/pytorch/pytorch/commit/"+e.id,target:"_blank"},e.id.slice(0,7)))),u=y(e.timestamp);return t?r.a.createElement("tr",{key:e.id,className:""},r.a.createElement("th",{className:"left-cell"},function(e){var t=e.match(/\(#(\d+)\)/);return t||(t=e.match(/https:\/\/github.com\/pytorch\/pytorch\/pull\/(\d+)/))?r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"https://github.com/pytorch/pytorch/pull/"+t[1],target:"_blank"},"#",t[1])):r.a.createElement(n.Fragment,null)}(e.message)),r.a.createElement("td",{className:"left-cell",title:e.timestamp},u),i,r.a.createElement("td",{className:"right-cell"},o),r.a.createElement("td",{className:"right-cell"},s)):r.a.createElement(n.Fragment,{key:e.id})}));return r.a.createElement("div",null,r.a.createElement("h2",null,this.props.job," history"," ",r.a.createElement(v,{interval:this.props.interval,connectedIn:this.state.connectedIn,currentTime:this.state.currentTime,updateTime:this.state.updateTime})),r.a.createElement("div",null,r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",name:"show-notifications",checked:this.state.showNotifications,onChange:function(t){return e.setState({showNotifications:t.target.checked})}}),r.a.createElement("label",{htmlFor:"show-notifications"},"Show notifications on master failure","denied"===Notification.permission?r.a.createElement(n.Fragment,null," ",r.a.createElement("strong",null,"(WARNING: notifications are currently denied)")):"")),r.a.createElement("br",null),r.a.createElement("li",null,r.a.createElement("input",{type:"checkbox",name:"show-service-jobs",checked:this.state.showServiceJobs,onChange:function(t){return e.setState({showServiceJobs:t.target.checked})}}),r.a.createElement("label",{htmlFor:"show-service-jobs"},"Show service jobs")),r.a.createElement("br",null),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"job-name-filter"},"Name filter:\xa0"),r.a.createElement("input",{type:"input",name:"job-name-filter",value:this.state.jobNameFilter,onChange:function(t){return e.setState({jobNameFilter:t.target.value})}})))),r.a.createElement("table",{className:"buildHistoryTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"left-cell"},"PR#"),r.a.createElement("th",{className:"left-cell"},"Date"),i,r.a.createElement("th",{className:"right-cell"},"User"),r.a.createElement("th",{className:"right-cell"},"Description"))),r.a.createElement("tbody",null,l)))}}]),a}(n.Component);function H(e){for(var t=new Map,a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];t.set(r,e[r])}return t}var z=1e5;function q(e){return Math.round(e*z)/z}var G=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state=n.initialState(),n}return Object(p.a)(a,[{key:"initialState",value:function(){return{builds:[],known_jobs:[],jobNameFilter:""}}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(e){}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r,c,i,o,m,p,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://s3.amazonaws.com/ossci-metrics/torchbench_v0_nightly",e.next=3,_.a.get("".concat(t,"/index.json"));case 3:return a=e.sent,console.log(a.data),n=a.data.map(function(){var e=Object(u.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("".concat(t,"/").concat(a.result.relpath));case 3:n=e.sent,a.sb_map=H(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.sb_map=new Map;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e.next=8,_.a.all(n);case 8:for(r=e.sent,c=new Set,i=r[0].sb_map.get("benchmarks"),o=new Map,i.forEach((function(e,t){c.add(e.name),o.set(e.name,t)})),console.log(c),m=function(e){r[e].sb_map.get("benchmarks").forEach((function(t){var a=t.stats.mean,n=o.get(t.name);if(0===e)t.stats.prev_mean=a;else{var c=r[e-1].sb_map.get("benchmarks")[n].stats.mean;t.stats.prev_mean=c}}))},p=0;p<r.length;p++)m(p);r.reverse(),(h={}).known_jobs=Object(l.a)(c.values()).sort(),h.benchmark_index=o,h.builds=r,this.setState(h);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldShowJob",value:function(e){var t=this.state.jobNameFilter;return!(t.length>0&&!e.includes(t))}},{key:"render",value:function(){var e=this;var t=this.state.builds,a=this.state.known_jobs.filter((function(t){return e.shouldShowJob(t)})),c=a.map((function(e){return r.a.createElement("th",{className:"rotate",key:e,width:"20px;"},r.a.createElement("div",null,e))})),i=this.state.benchmark_index,l=t.map((function(e){var t=e.sb_map,c=e.sb_map.get("machine_info").pytorch_version,l=a.map((function(e){var a,l=t.get("benchmarks")[i.get(e)],o=c+"-"+e,s=r.a.createElement(n.Fragment,null),u=(l.stats.mean-l.stats.prev_mean)/l.stats.prev_mean;return void 0!==l&&(s=function(e){return e<-.1?r.a.createElement("span",{role:"img",style:{color:"green"},"aria-label":"passed"},"0"):(t=e,t>.1?r.a.createElement("span",{role:"img",style:{color:"red"},"aria-label":"failed"},"X"):r.a.createElement("span",{role:"img",style:{color:"grey"},"aria-label":"passed"},"-"));var t}(u)),r.a.createElement(F.a,{key:e,overlay:e+" Mean: "+q(l.stats.mean)+", prev mean: "+q(l.stats.prev_mean)+", delta: "+(a=u,(a=Math.round(1e4*a)/100)>=0&&(a="+"+a),a+="%"),mouseLeaveDelay:0,placement:"rightTop",destroyTooltipOnHide:!0},r.a.createElement("td",{key:o,className:"icon-cell",style:{textAlign:"right",fontFamily:"sans-serif",padding:0}}," ",s," "))}));return r.a.createElement("tr",{key:c},r.a.createElement("th",{className:"left-cell"}," torch-",c," "),l)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"TorchBench v0 nightly testing result"),r.a.createElement("div",null,r.a.createElement("ul",{className:"menu"})),r.a.createElement("table",{className:"perfHistoryTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"left-cell"},"Build"),c)),r.a.createElement("tbody",null,l)))}}]),a}(n.Component),X=a(7),Q=(a(88),a(48)),K=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.update()}},{key:"correlateJobs",value:function(e){var t,a=["success","skipped","pending","queued"],n={},r={},c=function(e,t){n[e]=!0,n[t]=!0,r[e]||(r[e]=[]),r[e][t]||(r[e][t]=0),r[e][t]+=1},i=Object(S.a)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value,o=[];for(var s in l.value){var u=l.value[s];u.status&&-1===a.indexOf(u.status)&&o.push(s)}for(var m=0,p=o;m<p.length;m++){var h,d=p[m],f=Object(S.a)(o);try{for(f.s();!(h=f.n()).done;){c(d,h.value)}}catch(j){f.e(j)}finally{f.f()}}}}catch(j){i.e(j)}finally{i.f()}var _,b=Object.keys(n).sort(),v=[],g=Object(S.a)(b);try{for(g.s();!(_=g.n()).done;){var y,E=_.value,w=[],k=Object(S.a)(b);try{for(k.s();!(y=k.n()).done;){var x=y.value;r[E]&&r[E][x]?w.push(r[E][x]):w.push(0)}}catch(j){k.e(j)}finally{k.f()}v.push(w)}}catch(j){g.e(j)}finally{g.f()}return[b,v]}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://ossci-job-status.s3.amazonaws.com/master",e.t0=JSON,e.next=4,fetch("".concat(t,"/index.json"),{cache:"no-cache"}).then((function(e){return e.text()}));case 4:return e.t1=e.sent,e.t2=e.t0.parse.call(e.t0,e.t1),a={job_index:e.t2},n=a.job_index.map((function(e){return fetch("".concat(t,"/").concat(e.id,".json")).then((function(e){return e.json()}))})),e.t3=this,e.next=11,Promise.allSettled(n);case 11:e.t4=e.sent,this.state.correlations=e.t3.correlateJobs.call(e.t3,e.t4),this.setState(a);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tooltipTemplate",value:function(e,t,a){var n=a.background,r=e.data[0].label.split(", "),c=Object(X.a)(r,2),i=c[0],l=c[1];return'\n        <div\n        style="\n    background: '.concat(n,';\n    padding: 0 5px;\n    text-align: center;\n    color: white;">\n        <div\n        class="toastui-chart-tooltip-category"\n        style="font-weight: bold; font-family: Arial, sans-serif; font-size: 13px; color: #ffffff;">\n            ').concat(i,"\n            <br />\n            ").concat(l,'\n        </div>\n        <div\n        class="toastui-chart-tooltip-series-wrapper"\n        style="font-weight: normal; font-family: Arial, sans-serif; font-size: 12px; color: #ffffff;">\n            <div class="toastui-chart-tooltip-series">\n                <span class="toastui-chart-series-name">\n                <i class="toastui-chart-icon" style="background: ').concat(e.data[0].color,'"></i>\n                <span class="toastui-chart-name">').concat(e.data[0].value,"</span>\n                </span>\n            </div>\n        </div>\n    </div>\n    ")}},{key:"componentDidUpdate",value:function(){if(this.state.correlations){var e=document.getElementById("job-correlations"),t=Object(X.a)(this.state.correlations,2),a=t[0],n=t[1];e.innerHTML="";var r={usageStatistics:!1,xAxis:{label:{formatter:function(e,t){return""}}},yAxis:{label:{formatter:function(e,t){return""}}},tooltip:{template:this.tooltipTemplate}},c={categories:{x:a,y:a},series:n};Q.a.heatmapChart({el:e,data:c,options:r})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"CI Job Correlations"),r.a.createElement("div",{id:"job-correlations",style:{width:"550px",height:"550px"}}))}}]),a}(n.Component),V=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.update()}},{key:"update",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,fetch("https://ossci-checks-status.s3.amazonaws.com/status.json",{cache:"no-cache"}).then((function(e){return e.text()}));case 3:e.t1=e.sent,e.t2=e.t0.parse.call(e.t0,e.t1),t={actions_statuses:e.t2},this.setState(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){if(this.state.actions_statuses){for(var e={dates:[]},t=["in_progress","queued","pending"],a=0,n=t;a<n.length;a++){e[n[a]]=[]}this.state.actions_statuses.sort((function(e,t){return e.last_updated-t.last_updated}));var r,c=Object(S.a)(this.state.actions_statuses);try{for(c.s();!(r=c.n()).done;){var i=r.value;e.dates.push(new Date(1e3*i.last_updated).toLocaleString());var l,o=Object(S.a)(t);try{for(o.s();!(l=o.n()).done;){var s=l.value;e[s].push(i[s]||0)}}catch(_){o.e(_)}finally{o.f()}}}catch(_){c.e(_)}finally{c.f()}for(var u=[],m=0,p=t;m<p.length;m++){var h=p[m];u.push({name:h,data:e[h]})}var d={categories:e.dates,series:u},f=document.getElementById("chart");f.innerHTML="";Q.a.lineChart({el:f,data:d,options:{}})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"GitHub Actions Status"),r.a.createElement("div",{id:"chart",style:{width:"600px",height:"400px"}}))}}]),a}(n.Component),Y=a(169),Z=a(168),ee=a(170),te=a(171),ae=function(){return r.a.createElement("div",null,r.a.createElement(V,null),r.a.createElement(K,null),r.a.createElement(N,{interval:1e3}),r.a.createElement(j,{interval:1e3}))},ne=function(e){var t=e.match,a=new URLSearchParams(window.location.search);return r.a.createElement(L,{interval:6e4,job:t.url.replace(/^\/build\//,""),mode:a.get("mode")})},re=function(e){var t=e.match,a=new URLSearchParams(window.location.search);return r.a.createElement(L,{interval:6e4,job:t.url.replace(/^\/build1\//,""),mode:a.get("mode")})},ce=function(e){var t=e.match,a=new URLSearchParams(window.location.search);return r.a.createElement($,{interval:6e4,job:t.url.replace(/^\/build2\//,""),mode:a.get("mode")})},ie=function e(t){var a=t.match;return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{exact:!0,path:a.url,component:ne}),r.a.createElement(ee.a,{path:"".concat(a.url,"/:segment"),component:e}))},le=function e(t){var a=t.match;return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{exact:!0,path:a.url,component:re}),r.a.createElement(ee.a,{path:"".concat(a.url,"/:segment"),component:e}))},oe=function e(t){var a=t.match;return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{exact:!0,path:a.url,component:ce}),r.a.createElement(ee.a,{path:"".concat(a.url,"/:segment"),component:e}))},se=function(e){var t=e.match;return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{exact:!0,path:t.url,component:G}))},ue=function(){return r.a.createElement(Y.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},r.a.createElement(Z.a,{to:"/"},"ci.pytorch.org HUD")," (",r.a.createElement("a",{href:"https://github.com/pytorch/pytorch-ci-hud"},"GitHub"),")")),r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,"New-style (warning, does NOT show Jenkins builds):"),["pytorch"].map((function(e){return r.a.createElement(n.Fragment,{key:e},["master","nightly","release/1.9"].map((function(t){return r.a.createElement("li",{key:"".concat(e,"-").concat(t)},r.a.createElement(Z.a,{to:"/build2/".concat(e,"-").concat(t)},e,"-",t),"\xa0 (",r.a.createElement(Z.a,{to:"/build2/".concat(e,"-").concat(t,"?mode=nightly")},"binary"),")")})))})),["torchbench-v0-nightly","status"].map((function(e){return r.a.createElement("li",{key:"".concat(e)},r.a.createElement(Z.a,{to:"/".concat(e)},e))}))),r.a.createElement("ul",{className:"deprecated-menu"},r.a.createElement("li",null,"Old-style:"),["pytorch","rocm-pytorch"].map((function(e){return r.a.createElement(n.Fragment,{key:e},["master","pull-request"].map((function(t){return r.a.createElement("li",{key:e+"-"+t},r.a.createElement(Z.a,{to:"/build1/"+e+"-"+t},e,"-",t),"\xa0 (",r.a.createElement(Z.a,{to:"/build1/"+e+"-"+t+"?mode=perf"},"perf"),"/",r.a.createElement(Z.a,{to:"/build1/"+e+"-"+t+"?mode=cost"},"cost"),"pytorch"===e&&"master"===t?r.a.createElement(n.Fragment,null,"/",r.a.createElement(Z.a,{to:"/build1/"+e+"-"+t+"?mode=binary"},"binary")):r.a.createElement(n.Fragment,null),")")})))})),r.a.createElement(n.Fragment,{key:"nightlies-uploaded"},r.a.createElement("li",null,r.a.createElement(Z.a,{to:"/build1/nightlies-uploaded"},"nightlies-uploaded")))),r.a.createElement(ee.a,{exact:!0,path:"/"},r.a.createElement(te.a,{to:"/build2/pytorch-master"})),r.a.createElement(ee.a,{path:"/build",component:ie}),r.a.createElement(ee.a,{path:"/build1",component:le}),r.a.createElement(ee.a,{path:"/build2",component:oe}),r.a.createElement(ee.a,{path:"/torchbench-v0-nightly",component:se}),r.a.createElement(ee.a,{exact:!0,path:"/status",component:ae})))},me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pe(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(ue,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");me?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pe(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):pe(e)}))}}()}},[[166,1,2]]]);
//# sourceMappingURL=main.2a401ae0.chunk.js.map